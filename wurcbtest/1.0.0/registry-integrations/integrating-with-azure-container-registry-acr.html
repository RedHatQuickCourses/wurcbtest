<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integrating with Azure Container Registry (ACR) :: Advanced Administration of Azure Red Hat OpenShift</title>
    <link rel="prev" href="registry-integrations.html">
    <link rel="next" href="integrating-with-quay.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">Advanced Administration of Azure Red Hat OpenShift</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="wurcbtest" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Advanced Administration of Azure Red Hat OpenShift</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../azure-red-hat-openshift-architecture-and-overview/azure-red-hat-openshift-architecture-and-overview.html">Azure Red Hat OpenShift Architecture and Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../azure-red-hat-openshift-architecture-and-overview/aro-platform-capabilities.html">ARO platform capabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../azure-red-hat-openshift-architecture-and-overview/joint-engineering-operation-and-support-model.html">Joint engineering, operation, and support model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../azure-red-hat-openshift-architecture-and-overview/managed-control-plane-and-infrastructure.html">Managed control plane and infrastructure</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../aro-cluster-provisioning/aro-cluster-provisioning.html">ARO Cluster Provisioning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../aro-cluster-provisioning/creating-an-azure-red-hat-openshift-cluster.html">Creating an Azure Red Hat OpenShift cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../aro-cluster-provisioning/creating-a-private-azure-red-hat-openshift-cluster.html">Creating a private Azure Red Hat OpenShift cluster</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../core-cluster-configuration/core-cluster-configuration.html">Core Cluster Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-cluster-configuration/configuring-additional-storage-classes.html">Configuring additional storage classes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-cluster-configuration/creating-dedicated-machine-sets.html">Creating dedicated machine sets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-cluster-configuration/configuring-node-autoscaling.html">Configuring node autoscaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-cluster-configuration/configuring-log-forwarding.html">Configuring log forwarding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../core-cluster-configuration/configuring-custom-dns-and-dns-forwarding.html">Configuring custom DNS and DNS forwarding</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="registry-integrations.html">Registry Integrations</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="integrating-with-azure-container-registry-acr.html">Integrating with Azure Container Registry (ACR)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="integrating-with-quay.html">Integrating with Quay</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="using-the-internal-openshift-registry.html">Using the internal OpenShift registry</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../cluster-application-data-management/cluster-application-data-management.html">Cluster Application Data Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cluster-application-data-management/backup-and-restore-of-cluster-applications-using-velero.html">Backup and restore of cluster applications using Velero</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../openshift-and-kubernetes-interfaces/openshift-and-kubernetes-interfaces.html">OpenShift and Kubernetes Interfaces</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../openshift-and-kubernetes-interfaces/navigating-the-openshift-web-console.html">Navigating the OpenShift Web Console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../openshift-and-kubernetes-interfaces/utilizing-the-kubernetes-command-line-interface-cli.html">Utilizing the Kubernetes Command-line Interface (CLI)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../openshift-and-kubernetes-interfaces/utilizing-the-openshift-command-line-interface-cli.html">Utilizing the OpenShift Command-line Interface (CLI)</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../troubleshooting-and-application-management/troubleshooting-and-application-management.html">Troubleshooting and Application Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting-and-application-management/troubleshooting-containers-and-pods.html">Troubleshooting containers and pods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../troubleshooting-and-application-management/managing-applications-using-the-kubernetes-workload-api.html">Managing applications using the Kubernetes Workload API</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kubernetes-networking-and-application-exposure/kubernetes-networking-and-application-exposure.html">Kubernetes Networking and Application Exposure</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kubernetes-networking-and-application-exposure/understanding-kubernetes-pod-and-service-networks.html">Understanding Kubernetes Pod and Service Networks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kubernetes-networking-and-application-exposure/scaling-and-exposing-applications-to-external-access.html">Scaling and exposing applications to external access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kubernetes-networking-and-application-exposure/externalizing-application-configurations.html">Externalizing application configurations</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../network-security-policies/network-security-policies.html">Network Security Policies</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../network-security-policies/configuring-network-policies.html">Configuring network policies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../network-security-policies/limiting-ingress-traffic.html">Limiting ingress traffic</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../gitops-for-cluster-administration/gitops-for-cluster-administration.html">GitOps for Cluster Administration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gitops-for-cluster-administration/implementing-openshift-gitops.html">Implementing OpenShift GitOps</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gitops-for-cluster-administration/using-argocd-for-declarative-cluster-management.html">Using ArgoCD for declarative cluster management</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../multi-cluster-management/multi-cluster-management.html">Multi-Cluster Management</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../multi-cluster-management/overview-of-red-hat-advanced-cluster-management-rhacm.html">Overview of Red Hat Advanced Cluster Management (RHACM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../multi-cluster-management/managing-kubernetes-clusters-with-rhacm.html">Managing Kubernetes clusters with RHACM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../knowledge-share-and-discussions/knowledge-share-and-discussions.html">Knowledge Share and Discussions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../knowledge-share-and-discussions/integrating-azure-ad-with-openshift-oauth.html">Integrating Azure AD with OpenShift OAuth</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../knowledge-share-and-discussions/integrating-azure-key-vault-with-aro.html">Integrating Azure Key Vault with ARO</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../knowledge-share-and-discussions/differentiating-availability-sets-vs-availability-zones.html">Differentiating Availability Sets vs. Availability Zones</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../knowledge-share-and-discussions/understanding-azure-spot-instances.html">Understanding Azure Spot Instances</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../knowledge-share-and-discussions/exploring-hosted-control-planes.html">Exploring Hosted Control Planes</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../hands-on-lab/hands-on-lab.html">Hands-on Lab</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/create-an-azure-red-hat-openshift-cluster.html">Create an Azure Red Hat OpenShift Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/configure-additional-storage-classes.html">Configure additional storage classes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/create-dedicated-machine-sets.html">Create dedicated machine sets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/configure-node-autoscaling.html">Configure node autoscaling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/configure-log-forwarding.html">Configure log forwarding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/create-a-private-azure-red-hat-openshift-cluster.html">Create a private Azure Red Hat OpenShift Cluster</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/configure-custom-dns-and-dns-forwarding.html">Configure custom DNS and DNS forwarding</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/implement-registry-integrations-with-aro.html">Implement registry integrations with ARO</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/perform-backup-and-restore-of-a-cluster-application-with-velero.html">Perform backup and restore of a cluster application with Velero</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/troubleshoot-containers-and-pods.html">Troubleshoot containers and pods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/manage-applications-using-the-kubernetes-workload-api.html">Manage applications using the Kubernetes Workload API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/explore-kubernetes-pod-and-service-networks.html">Explore Kubernetes Pod and Service Networks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/scale-and-expose-applications-to-external-access.html">Scale and expose applications to external access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/externalize-application-configurations.html">Externalize application configurations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/configure-network-policies-and-limit-ingress-traffic.html">Configure network policies and limit ingress traffic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/implement-gitops-for-cluster-administration.html">Implement GitOps for cluster administration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../hands-on-lab/manage-a-cluster-using-red-hat-advanced-cluster-management.html">Manage a cluster using Red Hat Advanced Cluster Management</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Advanced Administration of Azure Red Hat OpenShift</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Advanced Administration of Azure Red Hat OpenShift</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Advanced Administration of Azure Red Hat OpenShift</a></li>
    <li><a href="registry-integrations.html">Registry Integrations</a></li>
    <li><a href="integrating-with-azure-container-registry-acr.html">Integrating with Azure Container Registry (ACR)</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Integrating with Azure Container Registry (ACR)</h1>
<h1 id="_integrating_with_azure_container_registry_acr" class="sect0"><a class="anchor" href="#_integrating_with_azure_container_registry_acr"></a>Integrating with Azure Container Registry (ACR)</h1>
<div id="integrating-with-azure-container-registry" class="paragraph">
<p>Azure Container Registry (ACR) is a fully managed, private Docker container registry service in Azure, offering enterprise-grade capabilities like geo-replication for global distribution of container images. When working with Azure Red Hat OpenShift (ARO), integrating ACR allows you to securely store and manage your private container images, ensuring they are readily available for your OpenShift applications.</p>
</div>
<div class="paragraph">
<p>This module details how to establish secure communication between your ARO cluster and an Azure Container Registry, enabling your pods to pull images from your private registry.</p>
</div>
<div class="sect1">
<h2 id="_aro_platform_capabilities_with_acr"><a class="anchor" href="#_aro_platform_capabilities_with_acr"></a>ARO Platform Capabilities with ACR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Integrating ACR with ARO leverages the platform&#8217;s capabilities for secure image management:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Private Image Storage</strong>: ACR provides a secure, private repository for your Docker images, isolated from public access.</p>
</li>
<li>
<p><strong>Authentication Mechanisms</strong>: ARO uses Kubernetes secrets to securely store ACR credentials, allowing pods to authenticate and pull private images.</p>
</li>
<li>
<p><strong>ImagePullSecrets</strong>: Kubernetes' <code>imagePullSecrets</code> mechanism ensures that pods can automatically authenticate against the registry when their deployment requires a private image.</p>
</li>
<li>
<p><strong>Enterprise Features</strong>: You can benefit from ACR&#8217;s advanced features such as geo-replication for faster image pulls in distributed environments, vulnerability scanning, and integration with Azure security services.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_technical_overview_of_acr_integration"><a class="anchor" href="#_technical_overview_of_acr_integration"></a>Technical Overview of ACR Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To allow an ARO cluster to pull private images from an Azure Container Registry, you need to establish a secure connection using Kubernetes secrets. The general workflow involves:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Obtaining ACR Credentials</strong>: Retrieving the username and password (pull secret) required to access your ACR instance.</p>
</li>
<li>
<p><strong>Creating a Kubernetes Secret</strong>: Storing these ACR credentials as a <code>docker-registry</code> type secret within your OpenShift project (namespace). This secret will hold the authentication details necessary for image pulls.</p>
</li>
<li>
<p><strong>Linking the Secret to a Service Account</strong>: Associating the created secret with a Kubernetes Service Account. Pods that use this Service Account will then automatically inherit the ability to use the linked secret for image pulls.</p>
</li>
<li>
<p><strong>Referencing the Secret in Pod Specifications</strong>: When defining your application&#8217;s pods, you specify the <code>imagePullSecrets</code> in the pod&#8217;s manifest, pointing to the Kubernetes secret containing your ACR credentials.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This process ensures that your container images remain private and that only authorized applications within your ARO cluster can access them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before proceeding with the integration, ensure you have the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An existing Azure Red Hat OpenShift cluster. If not, refer to the "Create an Azure Red Hat OpenShift Cluster" lab activity.</p>
</li>
<li>
<p>An existing Azure Container Registry (ACR) instance. If you don&#8217;t have one, you can create it via the Azure portal or Azure CLI.</p>
</li>
<li>
<p>The <code>oc</code> command-line interface (CLI) installed and configured to connect to your ARO cluster.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hands_on_activity_integrating_with_azure_container_registry"><a class="anchor" href="#_hands_on_activity_integrating_with_azure_container_registry"></a>Hands-on Activity: Integrating with Azure Container Registry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This hands-on activity guides you through the process of integrating your ARO cluster with an Azure Container Registry to pull private images.</p>
</div>
<div class="sect2">
<h3 id="_step_1_get_your_acr_pull_secret"><a class="anchor" href="#_step_1_get_your_acr_pull_secret"></a>Step 1: Get Your ACR Pull Secret</h3>
<div class="paragraph">
<p>You need a pull secret (username and password) from your ACR instance to access the registry from your ARO cluster.</p>
</div>
<div class="sect3">
<h4 id="_option_a_using_the_azure_portal"><a class="anchor" href="#_option_a_using_the_azure_portal"></a>Option A: Using the Azure Portal</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to your Azure Container Registry instance in the Azure portal.</p>
</li>
<li>
<p>In the left-hand menu, select <strong>Access keys</strong>.</p>
</li>
<li>
<p>Your <code>docker-username</code> is the name of your container registry.</p>
</li>
<li>
<p>Use either <code>password</code> or <code>password2</code> for your <code>docker-password</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_option_b_using_the_azure_cli"><a class="anchor" href="#_option_b_using_the_azure_cli"></a>Option B: Using the Azure CLI</h4>
<div class="paragraph">
<p>Execute the following Azure CLI command to retrieve your ACR credentials. Replace <code>&lt;your-registry-name&gt;</code> with the actual name of your Azure Container Registry.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">az acr credential show -n &lt;your-registry-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output will provide the <code>username</code> and <code>passwords</code> (password and password2) for your registry. Make a note of these.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_step_2_create_a_kubernetes_secret"><a class="anchor" href="#_step_2_create_a_kubernetes_secret"></a>Step 2: Create a Kubernetes Secret</h3>
<div class="paragraph">
<p>Now, use the credentials obtained in the previous step to create a Kubernetes secret of type <code>docker-registry</code> in your OpenShift project. This secret will store the authentication details for your ACR.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc create secret docker-registry acr-secret \
    --docker-server=&lt;your-registry-name&gt;.azurecr.io \
    --docker-username=&lt;your-registry-name&gt; \
    --docker-password=&lt;your-acr-password&gt; \
    --docker-email=unused</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Replace <code>&lt;your-registry-name&gt;</code> with the actual name of your Azure Container Registry.</p>
</li>
<li>
<p>Replace <code>&lt;your-acr-password&gt;</code> with one of the passwords obtained from Step 1 (e.g., <code>password</code> or <code>password2</code>).</p>
</li>
<li>
<p><code>acr-secret</code> is the name given to this Kubernetes secret. You can choose a different name if preferred.</p>
</li>
<li>
<p><code>unused</code> is a common placeholder for <code>--docker-email</code> as it&#8217;s often not strictly required for Docker registry authentication secrets in Kubernetes.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This secret is stored in the current OpenShift Project (Kubernetes Namespace) and will only be referenceable by pods created within that specific Project. If you need a cluster-wide pull secret or one available in multiple projects, you would need to create it in each respective project or explore other OpenShift features like <code>ImageStream</code> or a dedicated secret management solution.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_step_3_link_the_secret_to_a_service_account"><a class="anchor" href="#_step_3_link_the_secret_to_a_service_account"></a>Step 3: Link the Secret to a Service Account</h3>
<div class="paragraph">
<p>To simplify the process of pulling images, you can link the newly created secret to a Service Account. By default, OpenShift projects use the <code>default</code> Service Account for pods that don&#8217;t specify one. Linking the secret to <code>default</code> means any pod using the <code>default</code> Service Account (or implicitly using it) can pull images using <code>acr-secret</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc secrets link default acr-secret --for=pull</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>default</code> refers to the Service Account. If your pods use a different Service Account, replace <code>default</code> with its name.</p>
</li>
<li>
<p><code>acr-secret</code> is the name of the Kubernetes secret you created in the previous step.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_4_create_a_pod_using_a_private_registry_image"><a class="anchor" href="#_step_4_create_a_pod_using_a_private_registry_image"></a>Step 4: Create a Pod Using a Private Registry Image</h3>
<div class="paragraph">
<p>Now that your cluster is connected to your ACR, let&#8217;s create a pod that pulls an image from your private registry. This example assumes you have an image named <code>hello-world:v1</code> in your ACR.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a file named <code>hello-world-pod.yaml</code> with the following content:</p>
<div class="literalblock">
<div class="content">
<pre>[source,yaml]
----
apiVersion: v1
kind: Pod
metadata:
  name: hello-world-acr
spec:
  containers:
  - name: hello-world
    image: &lt;your-registry-name&gt;.azurecr.io/hello-world:v1
  imagePullSecrets:
  - name: acr-secret
----</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Replace <code>&lt;your-registry-name&gt;</code> with the name of your Azure Container Registry.</p>
</li>
<li>
<p>Ensure the <code>image</code> path correctly points to an image residing in your ACR.</p>
</li>
<li>
<p><code>imagePullSecrets</code> specifies that the <code>acr-secret</code> should be used for authenticating when pulling the image.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Apply the YAML to create the pod:</p>
<div class="literalblock">
<div class="content">
<pre>[source,bash]
----
oc apply -f hello-world-pod.yaml
----</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_5_verify_the_pod_status"><a class="anchor" href="#_step_5_verify_the_pod_status"></a>Step 5: Verify the Pod Status</h3>
<div class="paragraph">
<p>To confirm that your pod is up and running and successfully pulled the image from your private ACR, execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">oc get pods --watch</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wait until the <code>STATUS</code> of the <code>hello-world-acr</code> pod changes to <code>Running</code>. This indicates that the image was successfully pulled from your Azure Container Registry, and the container started without issues. If you encounter <code>ImagePullBackOff</code> errors, double-check your ACR credentials, the secret name, and the image path.</p>
</div>
<div class="paragraph">
<p>This completes the integration of Azure Container Registry with your Azure Red Hat OpenShift cluster, enabling secure access to your private container images.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="registry-integrations.html">Registry Integrations</a></span>
  <span class="next"><a href="integrating-with-quay.html">Integrating with Quay</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
